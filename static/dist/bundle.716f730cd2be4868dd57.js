"use strict";(self.webpackChunkdepot=self.webpackChunkdepot||[]).push([[320],{6320:function(e,t,a){a.r(t),a.d(t,{default:function(){return r}});var n=a(6540),o=a(1083),l=a(6546),c=({doc:e,onClose:t})=>{const[a,c]=(0,n.useState)(!1),[r,i]=(0,n.useState)(""),[s,m]=(0,n.useState)(""),[u,d]=(0,n.useState)(!1),[E,_]=(0,n.useState)(!1),p=()=>{const t="Other"===r&&s?s:r,n={docId:e.id,docName:e.docname,signType:a?"Через ЭДО":"Лично",operator:a?t:null};o.A.post("/api/docs/sign",n).then((e=>d(!0))).catch((e=>_(!0))),setTimeout((()=>{d(!1),_(!1)}),5e3)};return n.createElement("div",{className:"editor__popup"},n.createElement("div",{className:"editor__popup--content"},n.createElement("div",{className:"editor__popup--header flex flex--sb flex--center"},n.createElement("h2",{className:"editor__title"},"Выбрать способ подписания"),n.createElement("button",{className:"editor__close",onClick:t,"aria-label":"Закрыть"},n.createElement(l.A,{selector:"CloseIcon",width:"30",height:"30"}))),n.createElement("div",{className:"editor__popup--buttons"},n.createElement("button",{className:"button animate--pulse",onClick:()=>{c(!1),p()}},"Лично"),n.createElement("button",{className:"button animate--pulse",onClick:()=>c(!0)},"Через ЭДО")),a&&n.createElement("div",{className:"form form--admin"},n.createElement("div",{className:"form__group"},n.createElement("select",{className:"form__input",onChange:e=>i(e.target.value)},n.createElement("option",{value:""},"Укажите оператора"),n.createElement("option",{value:"АЙТИКОМ (ITCOM)"},"АЙТИКОМ (ITCOM)"),n.createElement("option",{value:"Банк Точка (Точка: Документооборот)"},"Банк Точка (Точка: Документооборот)"),n.createElement("option",{value:"Бифит (БИФИТ ЭДО)"},"Бифит (БИФИТ ЭДО)"),n.createElement("option",{value:"ЕЭТП (Росэлторг) (Росинвойс)"},"ЕЭТП (Росэлторг) (Росинвойс)"),n.createElement("option",{value:"Инфотекс ИТ (ViPNet)"},"Инфотекс ИТ (ViPNet)"),n.createElement("option",{value:"КрасКрипт (СТЭК-Траст)"},"КрасКрипт (СТЭК-Траст)"),n.createElement("option",{value:"Криптэкс (Signatura)"},"Криптэкс (Signatura)"),n.createElement("option",{value:"НИИАС (НИИАС)"},"НИИАС (НИИАС)"),n.createElement("option",{value:"НТСофт (Сервис ЭДО.МИГ24)"},"НТСофт (Сервис ЭДО.МИГ24)"),n.createElement("option",{value:"НТЦ СТЭК (СТЭК)"},"НТЦ СТЭК (СТЭК)"),n.createElement("option",{value:"Петер-Сервис Спецтехнологии (ЭДО.Поток)"},"Петер-Сервис Спецтехнологии (ЭДО.Поток)"),n.createElement("option",{value:"Русь-Телеком (Фельдъегерь: ЭДО)"},"Русь-Телеком (Фельдъегерь: ЭДО)"),n.createElement("option",{value:"Сберключ (Сбербанк-АСТ)"},"Сберключ (Сбербанк-АСТ)"),n.createElement("option",{value:"ТаксНет (Транскрипт)"},"ТаксНет (Транскрипт)"),n.createElement("option",{value:"ТЭК-Торг (ЭДО ТЭК-Торг)"},"ТЭК-Торг (ЭДО ТЭК-Торг)"),n.createElement("option",{value:"УЦ АСКОМ (АСКОМ.NET)"},"УЦ АСКОМ (АСКОМ.NET)"),n.createElement("option",{value:"УЦ СОЮЗ (ЭДО Командор)"},"УЦ СОЮЗ (ЭДО Командор)"),n.createElement("option",{value:"Финтендер-Крипто (Fintender-EDS)"},"Финтендер-Крипто (Fintender-EDS)"),n.createElement("option",{value:"ФораПром (LeraData)"},"ФораПром (LeraData)"),n.createElement("option",{value:"Э-Ком (Docrobot)"},"Э-Ком (Docrobot)"),n.createElement("option",{value:"Эвотор ОФД (Платформа.ЭДО)"},"Эвотор ОФД (Платформа.ЭДО)"),n.createElement("option",{value:"Электронный экспресс (Гарант ДокМэйл (ЭДО ЭП))"},"Электронный экспресс (Гарант ДокМэйл (ЭДО ЭП))"),n.createElement("option",{value:"Электронный экспресс (Экспресс Документ)"},"Электронный экспресс (Экспресс Документ)"),n.createElement("option",{value:"ЭТП ГПБ (Система ЭДО ЭТП ГПБ)"},"ЭТП ГПБ (Система ЭДО ЭТП ГПБ)"),n.createElement("option",{value:"CISLink (DOCLINK)"},"CISLink (DOCLINK)"),n.createElement("option",{value:"Other"},"Другое"))),"Other"===r&&n.createElement("div",{className:"form__group"},n.createElement("input",{type:"text",className:"form__input",placeholder:"Введите название оператора",onChange:e=>m(e.target.value)})),n.createElement("button",{className:"button animate--pulse",onClick:p},"Отправить")),u&&n.createElement("div",{className:"editor__message editor__message--green"},"Запрос на подписание отправлен"),E&&n.createElement("div",{className:"editor__message editor__message--red"},"Ошибка отправки запроса")))},r=()=>{const[e,t]=(0,n.useState)([]),[a,r]=(0,n.useState)(!1),[i,s]=(0,n.useState)(null),[m,u]=(0,n.useState)(!1),[d,E]=(0,n.useState)(!1),[_,p]=(0,n.useState)(""),[v,b]=(0,n.useState)("");(0,n.useEffect)((()=>{o.A.get("/api/docs").then((e=>t(e.data))).catch((e=>console.error("Error fetching documents:",e)))}),[]);const h=e=>{const t=window.open(e,"_blank");t.addEventListener("load",(()=>{t.print()}))};return n.createElement("div",{className:"editor"},n.createElement("h2",{className:"editor__title"},"Договоры"),n.createElement("div",{className:"editor__list"},e.filter((e=>"Договор аренды"===e.doctype)).map((e=>n.createElement("div",{className:"editor__item",key:e.id},n.createElement("div",{className:"editor__line"},n.createElement("div",{className:"editor__name"},e.docname),n.createElement("div",{className:"editor__buttons"},n.createElement("button",{className:"editor__button button button--icon button--smallIcon",onClick:()=>h(e.link)},n.createElement(l.A,{selector:"PrinterIcon",width:"18",height:"18"})),n.createElement("a",{className:"editor__button button button--icon button--smallIcon",href:e.link,download:!0},n.createElement(l.A,{selector:"DownloadIcon",width:"18",height:"18"})),n.createElement("a",{className:"editor__button button button--icon button--smallIcon",href:e.link,target:"_blank"},n.createElement(l.A,{selector:"MagnifierIcon",width:"16",height:"16"})))),"Не действующий"===e.status&&n.createElement("div",{className:"editor__line"},n.createElement("button",{className:"button animate--pulse",onClick:()=>(e=>{s(e),r(!0)})(e)},"Подписать")))))),n.createElement("h2",{className:"editor__title"},"Документы"),n.createElement("div",{className:"editor__list"},e.filter((e=>"Договор аренды"!==e.doctype)).map((e=>n.createElement("div",{className:"editor__item",key:e.id},n.createElement("div",{className:"editor__line"},n.createElement("div",{className:"editor__name"},e.docname),n.createElement("div",{className:"editor__buttons"},n.createElement("button",{className:"editor__button button button--icon button--smallIcon",onClick:()=>h(e.link)},n.createElement(l.A,{selector:"PrinterIcon",width:"18",height:"18"})),n.createElement("a",{className:"editor__button button button--icon button--smallIcon",href:e.link,download:!0},n.createElement(l.A,{selector:"DownloadIcon",width:"18",height:"18"})),n.createElement("a",{className:"editor__button button button--icon button--smallIcon",href:e.link,target:"_blank"},n.createElement(l.A,{selector:"MagnifierIcon",width:"16",height:"16"})))))))),n.createElement("h2",{className:"editor__title"},"Запросить документы"),n.createElement("form",{className:"form form--admin",onSubmit:e=>{e.preventDefault(),o.A.post("/api/docs/request",{docType:_,customRequest:v}).then((e=>u(!0))).catch((e=>E(!0))),setTimeout((()=>{u(!1),E(!1)}),5e3)}},n.createElement("div",{className:"form__group"},n.createElement("select",{className:"form__input form__input--black",name:"documentType",onChange:e=>p(e.target.value)},n.createElement("option",{value:"",disabled:!0},"Выберите документ"),["Акт","Справка"].map(((e,t)=>n.createElement("option",{key:t,value:e},e))))),n.createElement("div",{className:"form__group"},n.createElement("div",{className:"form__label"},"Другой запрос"),n.createElement("input",{className:"form__input form__input--black",type:"text",name:"otherRequest",placeholder:"Введите название необходимого документа",onChange:e=>b(e.target.value)})),n.createElement("button",{className:"button animate--pulse",type:"submit"},"Запросить")),m&&n.createElement("div",{className:"editor__message editor__message--green"},"Запрос успешно отправлен"),d&&n.createElement("div",{className:"editor__message editor__message--red"},"Ошибка отправки запроса"),a&&n.createElement(c,{doc:i,onClose:()=>r(!1)}))}},6546:function(e,t,a){var n=a(6540);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o.apply(null,arguments)}t.A=({selector:e="",width:t=12,height:a=12,fill:l="none",classNames:c="",...r})=>n.createElement("svg",o({className:`icon icon-${e} ${c}`,fill:l,width:t,height:a},r),n.createElement("use",{xlinkHref:`#${e}`}))}}]);