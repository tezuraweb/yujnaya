"use strict";(self.webpackChunkdepot=self.webpackChunkdepot||[]).push([[77],{3077:function(e,t,r){r.r(t);var a=r(6540),l=r(1083),n=r(6546);t.default=({base:e=""})=>{const[t,r]=(0,a.useState)({total:0,rented:0,available:0,rented_percentage:0,available_percentage:0}),[c,s]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{try{const t=""!==e?`/api/report/${e}`:"/api/report/depot",a=await l.A.get(t);if(a.data?.length>0){const e=a.data.map((e=>{const t=parseInt(e.total),r=parseInt(e.rented);let a=parseFloat(e.type_percentage),l=parseFloat(e.rented_percentage);if(isNaN(t)||isNaN(r)||isNaN(a)||isNaN(l))throw"Invalid data";return a=Math.round(a),l=Math.round(l),{type:e.type,total:t,rented:r,available:t-r,type_percentage:a,rented_percentage:l,available_percentage:100-l}})),t=e.reduce(((e,t)=>(e.total+=t.total,e.rented+=t.rented,e)),{total:0,rented:0});t.available=t.total-t.rented,t.rented_percentage=Math.round(t.rented/t.total*100),t.available_percentage=100-t.rented_percentage,r(t),s(e)}}catch(e){console.error("Error fetching report data:",e)}})()}),[]);const i=e=>{switch(e){case"Торговое":return"CommercialPremises";case"Холодный склад":return"RefrigeratorPremises";case"Производственно-складское":return"WarehousePremises";case"Офис":return"OfficePremises";case"Участок":return"SitePremises";default:return""}};return a.createElement("div",{className:"report"},a.createElement("div",{className:"report__header"},a.createElement("div",{className:"report__title"},a.createElement("h1",{className:"report__h1"},"ООО База Южная"),a.createElement("h2",{className:"report__h2"},"Отчет данных аренды")),a.createElement("div",{className:"report__date"},a.createElement("p",null,"Дата формирования отчета: ",a.createElement("br",null)," ",(new Date).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}))),a.createElement("button",{className:"report__print button button--icon",onClick:()=>{window.print()}},a.createElement(n.A,{selector:"PrinterIcon",width:"30",height:"30"}))),a.createElement("div",{className:"report__summary"},a.createElement("h3",{className:"report__h3"},"Общие показатели"),a.createElement("div",{className:"report__metrics"},a.createElement("div",{className:"report__metric"},a.createElement("p",null,"Всего помещений:"),a.createElement("p",{className:"report__metric--large"},t.total)),a.createElement("div",{className:"report__metric report__metric--green"},a.createElement("p",null,"В аренде: ",t.rented),a.createElement("p",{className:"report__metric--large"},t.rented_percentage,"%")),a.createElement("div",{className:"report__metric report__metric--red"},a.createElement("p",null,"Свободно: ",t.available),a.createElement("p",{className:"report__metric--large"},t.available_percentage,"%")))),a.createElement("div",{className:"report__ratio"},a.createElement("h3",{className:"report__h3"},"Соотношение по типам помещений от общего числа"),a.createElement("div",{className:"report__metrics"},c.map((e=>a.createElement("div",{className:"report__metric",key:e.type},a.createElement("p",null,e.type),a.createElement("p",{className:"report__metric--large"},e.type_percentage,"%")))))),a.createElement("div",{className:"report__status"},a.createElement("h3",{className:"report__h3"},"Статус по типам"),c.map((e=>a.createElement("div",{className:"report__block",key:e.type},a.createElement("h4",{className:"report__h4"},a.createElement("div",{className:"report__icon"},a.createElement(n.A,{selector:i(e.type),width:"30",height:"30"})),a.createElement("span",null,e.type)),a.createElement("div",{className:"report__bar"},a.createElement("div",{className:"report__percentage "+(e.rented==e.total?"report__percentage--green":0==e.rented?"report__percentage--red":"report__percentage--yellow"),style:{width:`${e.rented_percentage}%`}},e.rented_percentage,"%"),a.createElement("div",{className:"report__percentage "+(e.available==e.total?"report__percentage--red":0==e.available?"report__percentage--green":"report__percentage--grey"),style:{width:`${e.available_percentage}%`}},e.available_percentage,"%")),a.createElement("div",{className:"report__metrics report__metrics--sb"},a.createElement("div",{className:"report__metric"},a.createElement("p",null,"В Аренде"),a.createElement("p",null,e.rented," ",a.createElement("span",{className:"report__metric--thin"},"из ",e.total))),a.createElement("div",{className:"report__metric report__metric--right"},a.createElement("p",null,"Свободно"),a.createElement("p",null,e.available," ",a.createElement("span",{className:"report__metric--thin"},"из ",e.total)))))))))}},6546:function(e,t,r){var a=r(6540);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},l.apply(null,arguments)}t.A=({selector:e="",width:t=12,height:r=12,fill:n="none",classNames:c="",...s})=>a.createElement("svg",l({className:`icon icon-${e} ${c}`,fill:n,width:t,height:r},s),a.createElement("use",{xlinkHref:`#${e}`}))}}]);