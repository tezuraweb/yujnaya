"use strict";(self.webpackChunkdepot=self.webpackChunkdepot||[]).push([[899],{7899:function(e,a,t){t.r(a);var l=t(6540),c=t(1083),n=t(2800),r=t(6546),s=t(5469);a.default=()=>{const e=(0,s.t)(),[a,t]=(0,l.useState)([]),[i,m]=(0,l.useState)(0),[o,d]=(0,l.useState)(1),[_,g]=(0,l.useState)(1),[p,E]=(0,l.useState)(!1),u="desktop"===e?3:"laptop"===e?2:1,v="desktop"===e||"laptop"===e;(0,l.useEffect)((()=>{h(0,u)}),[]),(0,l.useEffect)((()=>{g(Math.ceil(i/u))}),[u,i]),(0,l.useEffect)((()=>{const e=(o-1)*u,t=o*u;a.length>e&&a.length<t&&h(a.length,t)}),[e]);const h=async(e,l)=>{if(a.length>e)d(Math.floor(e/u)+1);else try{const a={startIdx:e,endIdx:l,organization:["ДЕПО АО","ГАГАРИНСКИЙ ПКЦ ООО"]},n=await c.A.post("/api/search",a);if(m(n.data.total),g(Math.ceil(n.data.total/u)),0===n.data.total)return void E(!0);t((e=>[...e,...n.data.rows])),d(Math.floor(e/u)+1)}catch(e){console.error("Error fetching data:",e)}},N=e=>{h((e-1)*u,e*u)};return l.createElement(l.Fragment,null,v&&l.createElement("div",{className:"listing listing--external"},l.createElement("h2",{className:"listing__title listing__title--marginBottom"},"Объекты партнеров"),l.createElement("div",{className:"listing__content"},l.createElement("div",{className:"listing__column listing__column--left"},p?l.createElement("div",{className:"no-results"},"Ничего не найдено"):l.createElement("div",{className:"listing__cards"},a.slice((o-1)*u,o*u).map(((e,a)=>l.createElement(n.A,{key:a,card:e,modifier:"external"}))))),l.createElement("div",{className:"listing__column listing__column--right"},l.createElement("div",{className:"listing__pagination"},l.createElement("div",{className:"listing__pagination--line"},l.createElement("button",{onClick:()=>N(o-1),disabled:1===o,className:"listing__pagination--button animate--prev","aria-label":"Предыдущая страница"},l.createElement(r.A,{selector:"PrevIcon",width:"40",height:"40",fill:1===o?"#676767":"#F9BC07"})),l.createElement("button",{onClick:()=>N(o+1),disabled:o===_,className:"listing__pagination--button animate--next","aria-label":"Следующая страница"},l.createElement(r.A,{selector:"NextIcon",width:"40",height:"40",fill:o===_?"#676767":"#F9BC07"}))),l.createElement("div",{className:"listing__pagination--info"},"Стр. ",o,"/",_))))))}},2800:function(e,a,t){var l=t(6540),c=t(6546);a.A=({card:e,onClick:a=null,isActive:t,modifier:n=""})=>{const[r,s]=(0,l.useState)(0),i="external"===n,m="promotions"===n,o=e.promotion&&"rented"!==n,d=void 0!==e.type,_=void 0!==e.liter,g=void 0!==e.area,p=!i&&void 0!==e.floor,E=void 0!==e.cost||i,u=!i&&"rented"!==n&&"promotions"!==n,v="rented"===n&&e.date_d,h=void 0!==e.images&&e.images?.length>0,N=i,f=e.promotion&&e.promotion_price>0,b="Офис"==e.type?"/img/pics/officePlaceholder.webp":"/img/pics/warehousePlaceholder.webp";return l.createElement("div",{className:`card ${n?"card--"+n:""} ${t?"active":""}`,onClick:t=>{"BUTTON"!==t.target.tagName&&"A"!==t.target.tagName&&null!==a&&a(e)}},l.createElement("div",{className:"card__wrapper"},l.createElement("div",{className:"card__carousel"},l.createElement("div",{className:"card__pic"},h?l.createElement("img",{src:e.images[r],alt:"Property",className:"card__pic--img"}):l.createElement("img",{src:b,alt:"Property",className:"card__pic--img"}),o&&l.createElement("div",{className:"card__promotion"},"Акция")),h&&e.images.length>1&&l.createElement("button",{className:"card__nav card__nav--prev",onClick:()=>{s((a=>(a-1+e.images.length)%e.images.length))}},"<"),h&&e.images.length>1&&l.createElement("button",{className:"card__nav card__nav--next",onClick:()=>{s((a=>(a+1)%e.images.length))}},">")),l.createElement("div",{className:"card__info"},d&&l.createElement("div",{className:"card__type"},e.type),l.createElement("div",{className:"card__location"},_&&l.createElement(l.Fragment,null,i?e.liter:"Место: ",!i&&l.createElement("span",{className:"card__value"},e.liter," ",e.room))),l.createElement("div",{className:"card__columns"},l.createElement("div",{className:"card__details "+(i?"card__details--flex":"")},g&&l.createElement("div",{className:"card__detail"},l.createElement("span",{className:"card__icon"},l.createElement(c.A,{selector:"AreaIcon",width:"19",height:"19"})),l.createElement("span",{className:"card__value"},e.area," м²")),p&&l.createElement("div",{className:"card__detail"},l.createElement("span",{className:"card__icon"},l.createElement(c.A,{selector:"StoreyIcon",width:"19",height:"19"})),l.createElement("span",{className:"card__value"},e.floor," этаж")),E&&l.createElement("div",{className:"card__detail"},l.createElement("span",{className:"card__icon"},l.createElement(c.A,{selector:"PriceIcon",width:"19",height:"17"})),l.createElement("span",{className:"card__value"},i&&!e.cost?"По запросу":f?m?l.createElement(l.Fragment,null,l.createElement("span",{className:"card__value--green"},`${e.promotion_price}₽ / мес.`),l.createElement("span",null,` (${e.cost}₽ / мес.)`)):l.createElement("span",{className:"card__value--red"},`${e.promotion_price}₽ / мес.`):`${e.cost}₽ / мес.`))),u&&l.createElement("a",{href:`/premises/${e.id}`,className:"card__button button animate--pulse"},"Подробнее")),v&&l.createElement("div",{className:"card__rented"},l.createElement("div",{className:"card__subtitle"},"Арендовано до:"),l.createElement("div",{className:"card__value"},e.date_d))),N&&l.createElement("a",{href:"saitprtnera",className:"card__link button"},"Перейти на сайт партнера")))}},6546:function(e,a,t){var l=t(6540);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var l in t)({}).hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},c.apply(null,arguments)}a.A=({selector:e="",width:a=12,height:t=12,fill:n="none",classNames:r="",...s})=>l.createElement("svg",c({className:`icon icon-${e} ${r}`,fill:n,width:a,height:t},s),l.createElement("use",{xlinkHref:`#${e}`}))}}]);